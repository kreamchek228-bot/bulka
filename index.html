<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è –ú–∞–ª–∏–∫–∏ ‚ù§Ô∏è</title>
    
    <style>
        /* --- CSS VARIABLES & THEMES --- */
        :root {
            --primary: #ff4d6d;
            --primary-dark: #c9184a;
            --secondary: #ffb3c1;
            --bg-color: #fff0f3;
            --text-color: #590d22;
            --card-bg: #ffffff;
            --shadow: 0 10px 30px -10px rgba(255, 77, 109, 0.3);
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --border-radius: 24px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body.theme-night {
            --primary: #ff758f;
            --primary-dark: #ff4d6d;
            --secondary: #2d2d2d;
            --bg-color: #1a1a1a;
            --text-color: #ffe5ec;
            --card-bg: #2d2d2d;
            --shadow: 0 10px 30px -10px rgba(0,0,0, 0.5);
        }

        /* --- GLOBAL STYLES --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background 0.5s ease, color 0.5s ease;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        button { font-family: inherit; cursor: pointer; border: none; outline: none; }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 120px;
            position: relative;
            z-index: 2;
        }

        section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        section.visible { opacity: 1; transform: translateY(0); }

        h1, h2, h3 { text-align: center; margin-bottom: 15px; }
        h1 { font-size: 2.2rem; font-weight: 800; color: var(--primary); }

        /* --- BACKGROUND ANIMATIONS --- */
        .bg-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .bg-heart {
            position: absolute;
            color: var(--primary);
            opacity: 0.1;
            animation: floatUp linear infinite;
        }
        .bg-text {
            position: absolute;
            color: var(--primary-dark);
            font-weight: bold;
            opacity: 0;
            white-space: nowrap;
            animation: floatText 8s linear forwards;
            font-size: 1rem;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }

        @keyframes floatUp { to { transform: translateY(-100vh) rotate(360deg); } }
        @keyframes floatText {
            0% { transform: translateY(100vh) scale(0.8); opacity: 0; }
            10% { opacity: 0.4; }
            90% { opacity: 0.4; }
            100% { transform: translateY(-20vh) scale(1.2); opacity: 0; }
        }

        /* --- HEADER & CONTROLS --- */
        .top-controls { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 20px; }
        .icon-btn {
            background: var(--card-bg);
            padding: 0 15px;
            height: 44px;
            border-radius: 22px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            color: var(--primary);
            font-size: 0.9rem;
            font-weight: bold;
            transition: var(--transition);
            text-decoration: none;
        }

        /* --- COUNTER --- */
        .counter-display { text-align: center; padding: 20px 0; }
        .big-number {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary);
            line-height: 1;
            display: block;
            text-shadow: 2px 2px 0px var(--secondary);
        }

        /* --- LOVE METER --- */
        .progress-bar { height: 12px; background: var(--secondary); border-radius: 10px; overflow: hidden; position: relative; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-dark)); width: 0%; transition: width 0.5s ease; }

        /* --- GAME 1: CATCH --- */
        .game-area {
            height: 200px;
            background: linear-gradient(to bottom, var(--bg-color) 0%, #fff 100%);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--secondary);
            margin-top: 15px;
        }
        .catch-heart {
            position: absolute;
            font-size: 2rem;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s;
        }

        /* --- GAME 2: PUZZLE --- */
        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            width: 180px;
            margin: 15px auto;
        }
        .puzzle-piece {
            width: 55px;
            height: 55px;
            background: var(--secondary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .puzzle-piece.correct { background: #7ae582; color: white; }

        /* --- REASONS --- */
        .reasons-list { display: flex; flex-direction: column; gap: 12px; }
        .reason-card {
            background: var(--bg-color);
            padding: 15px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.3s;
            border-left: 5px solid var(--primary);
        }
        .reason-card:hover { transform: translateX(10px); background: #fff; }
        .reason-num { font-weight: 900; color: var(--primary); min-width: 35px; }

        .surprise-btn {
            width: 100%; padding: 20px;
            background: linear-gradient(45deg, #ff4d6d 0%, #ff8fa3 100%);
            color: white; font-weight: bold; border-radius: 20px;
            animation: pulse 2s infinite;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }

        #kiss-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(89, 13, 34, 0.9);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: white;
            text-align: center;
            padding: 20px;
            backdrop-filter: blur(8px);
        }
        #kiss-modal h2 { font-size: 2.5rem; margin-bottom: 20px; animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes bounceIn { from { transform: scale(0.3); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .tyk-container { text-align: center; margin-top: 20px; }
        .tyk-btn {
            background: transparent;
            color: var(--primary);
            font-size: 0.8rem;
            opacity: 0.6;
            padding: 5px 15px;
            border: 1px solid var(--primary);
            border-radius: 20px;
            transition: all 0.3s;
        }

        footer { text-align: center; padding: 40px 0 20px 0; opacity: 0.5; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="bg-layer" id="bg-hearts"></div>
<div class="bg-layer" id="bg-text"></div>

<div id="kiss-modal" onclick="this.style.display='none'">
    <h2 id="kiss-text">—Ö–∞—á—É —Ç–∏–ø—è –∑–∞—Ü–µ–º–∫–∞—Ç—å –∞ –ø–∞—Ç–æ–º üòàüòàüòà</h2>
    <p>(–Ω–∞–∂–º–∏ –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å)</p>
</div>

<div class="container">
    
    <header class="top-controls">
        <button class="icon-btn" id="theme-btn" onclick="toggleTheme()">üåô</button>
        <a href="https://music.yandex.ru/album/30235395/track/123755730" target="_blank" class="icon-btn">
            üéµ –ù–∞—à–∞ –º—É–∑—ã–∫–∞
        </a>
    </header>

    <section id="intro">
        <p style="text-align: center; text-transform: uppercase; font-size: 0.7rem; letter-spacing: 2px;">–î–ª—è –º–æ–µ–π –±—É–ª–æ—á–∫–∏</p>
        <h1 id="recipient-name">–ú–∞–ª–∏–∫–∞ ‚ù§Ô∏è</h1>
        <p style="text-align: center;">–° 14 —Ñ–µ–≤—Ä–∞–ª—è —Ç–µ–±—è, –ª—é–±–∏–º–∞—è! –¢—ã –º–æ—ë —Å—á–∞—Å—Ç—å–µ.</p>
        <button class="surprise-btn" id="surprise-btn" style="margin-top: 20px;">
            üíé –û—Ç–∫—Ä–æ–π —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ
        </button>
    </section>

    <section id="counter">
        <h3>–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ</h3>
        <div class="counter-display">
            <span class="big-number" id="days-count">0</span>
            <div style="font-size: 1rem; opacity: 0.8; margin-top: 10px;">–¥–Ω–µ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –∫–∞–π—Ñ–∞</div>
        </div>
        <p style="text-align: center; font-size: 0.8rem;">—Å 07.07.2024</p>
    </section>

    <section id="love-meter">
        <h3>–£—Ä–æ–≤–µ–Ω—å –æ–±–æ–∂–∞–Ω–∏—è</h3>
        <div class="progress-bar"><div class="progress-fill" id="love-fill"></div></div>
        <div id="love-text" style="text-align: center; font-size: 0.8rem; margin-top: 10px; font-weight: bold;">0% ‚Äî –õ–æ–≤–∏ —Å–µ—Ä–¥—Ü–∞ –≤–Ω–∏–∑—É!</div>
    </section>

    <section id="game-section">
        <h3>–ò–≥—Ä–∞ 1: –õ–æ–≤–∏ —Å–µ—Ä–¥—Ü–∞</h3>
        <div class="game-area" id="game-area"></div>
    </section>

    <section id="puzzle-section">
        <h3>–ò–≥—Ä–∞ 2: –°–æ–±–µ—Ä–∏ —Å–µ—Ä–¥—Ü–µ</h3>
        <p style="text-align: center; font-size: 0.75rem; opacity: 0.6;">–ù–∞–∂–º–∏ –Ω–∞ —á–∞—Å—Ç–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!</p>
        <div class="puzzle-grid" id="puzzle-grid"></div>
        <p id="puzzle-status" style="text-align: center; font-size: 0.8rem; margin-top: 10px; font-weight: bold;"></p>
    </section>

    <section id="reasons-section">
        <h2 id="reasons-title" style="color: var(--primary);">‚àû –ø—Ä–∏—á–∏–Ω –º–æ–µ–π –ª—é–±–≤–∏</h2>
        <div class="reasons-list" id="reasons-list"></div>
    </section>

    <footer>
        <p>–° –ª—é–±–æ–≤—å—é –∏–∑ –†–æ—Å—Å–∏–∏ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω üá∑üá∫‚ù§Ô∏èüá∞üáø</p>
        <p>¬© 2024 ‚Äî –ù–∞–≤—Å–µ–≥–¥–∞</p>
        <div class="tyk-container">
            <button class="tyk-btn" onclick="showKiss()">—Ç—ã–∫</button>
        </div>
    </footer>
</div>

<script>
    const CONFIG = {
        name: "–ú–∞–ª–∏–∫–∞",
        startDate: "2024-07-07",
        floatingPhrases: [
            "–õ—é–±–ª—é —Ç–µ–±—è", "–¢—ã –±—É–∫–∞", "–•—Ä—è", "–ú–≤–∞", "–ú—É–∞–∞–º–º", 
            "–¢—ã –º–∞—è —Ö—Ä—è–∫—Å–∞", "–õ—é–±–ª—é —Ç–µ–ø—è", "–¢—ã –≤–∞—â–µ –∂–æ–ø–∞", "–•–µ—Ö–µ", 
            "–Ø –≤—Å–µ–≥–¥–∞ –±—É–¥—É —Ä—è–¥–æ–º", "–ú–æ—è –ú–∞–ª–∏–∫–∞", "–ü—É–∫–∞ —Ö—Ä—é–∫–∞", "–ú–æ—è –±—É–ª–æ—á–∫–∞"
        ],
        reasons: [
            "–¢–≤–æ—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –º–æ—Å—å–∫–∞", "–¢–≤–æ—è —à–∏–∫–∞—Ä–Ω–∞—è –ø–æ–ø–∏", "–¢–≤–æ–π —Å–º–µ—Ö", "–° —Ç–æ–±–æ–π —è –º–æ–≥—É –Ω–µ —Å—Ç–µ—Å–Ω—è—Ç—å—Å—è –±—ã—Ç—å —Å–æ–±–æ–π",
            "–° —Ç–æ–±–æ–π —è –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ–±–æ –≤—Å–µ–º", "–° —Ç–æ–±–æ–π —è –º–æ–≥—É –Ω–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –±—Ä–µ–¥", "–° —Ç–æ–±–æ–π —è –º–æ–≥—É –Ω–µ –±–æ—è—Ç—å—Å—è –æ—Å—É–∂–¥–µ–Ω–∏—è",
            "–° —Ç–æ–±–æ–π –º—ã –º–æ–∂–µ–º –æ—Å—É–∂–¥–∞—Ç—å –≤—Å–µ—Ö", "–õ—é–±–ª—é –∫–∞–∫ —Ç—ã —Å–ª—É—à–∞–µ—à—å –º–µ–Ω—è –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—à—å —á—Ç–æ —è –≥–æ–≤–æ—Ä—é", "–¢–≤–æ—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —Ç—Ä—É–¥–Ω—ã–µ –º–∏–Ω—É—Ç—ã",
            "–¢–≤–æ–∏ —Å–æ–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ", "–ù–∞—à–∏ –Ω–æ—á–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã", "–¢–≤–æ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ —è —Ö—Ä–∞–Ω—é", "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –∫ –º–∏—Ä—É", "–ö–∞–∫ —Ç—ã –¥—É–µ—à—å –≥—É–±–∫–∏",
            "–¢–≤–æ–∏ –∫—Ä–∞—Å–∏–≤—ã–µ –≥–ª–∞–∑–∞", "–¢–≤–æ–π –∑–∞–ø–∞—Ö –¥–∞–∂–µ —á–µ—Ä–µ–∑ —ç–∫—Ä–∞–Ω —è –µ–≥–æ –ø–æ–º–Ω—é", "–¢–≤–æ–∏ –º–µ—á—Ç—ã –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç—ã –¥–µ–ª–∏—à—å—Å—è", "–¢–≤–æ—è –≤–µ—Ä–∞ –≤ –º–µ–Ω—è",
            "–¢–≤–æ—ë —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞", "–¢–≤–æ—è –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å", "–¢–≤–æ–∏ –±–æ–ª—å—à–∏–µ –ª–∞–¥–æ—à–∫–∏", "–ö–∞–∫ —Ç—ã –∑–ª–∏—à—å—Å—è —ç—Ç–æ –æ—á–µ–Ω—å –º–∏–ª–æ", "–¢–≤–æ—è –∑–∞–±–æ—Ç–∞ –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ",
            "–ù–∞—à–∏ –æ–±—â–∏–µ —à—É—Ç–∫–∏", "–î–∞—Ç–∞ –Ω–∞—à–µ–≥–æ –Ω–∞—á–∞–ª–∞ 07.07", "–¢–≤–æ–∏ —Å—Ç–∏–∫–µ—Ä—ã –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ", "–¢–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –≤–∫—É—Å", "–¢–≤–æ—ë —Ç–µ—Ä–ø–µ–Ω–∏–µ",
            "–¢–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —É—Ç—Ä–∞–º", "–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä", "–ö–∞–∫ —Ç—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—à—å –∑–∞ –º–µ–Ω—è", "–¢–≤–æ–∏ —Ä–∞—Å—Å–∫–∞–∑—ã –æ –¥–Ω–µ", "–¢–≤–æ–∏ –∫—É–ª–∏–Ω–∞—Ä–Ω—ã–µ —Ç–∞–ª–∞–Ω—Ç—ã",
            "–¢–≤–æ–π —Å—Ç–∏–ª—å –≤ –æ–¥–µ–∂–¥–µ", "–¢–≤–æ—è –Ω–µ–∂–Ω–∞—è –∫–æ–∂–∞", "–¢–æ –∫–∞–∫ —Ç—ã –Ω–∞–∑—ã–≤–∞–µ—à—å –º–µ–Ω—è –ø—É–∫–∞ —Ö—Ä—é–∫–∞", "–¢–≤–æ–∏ –≤–∑–≥–ª—è–¥—ã –Ω–∞ –∂–∏–∑–Ω—å", "–ù–∞—à–∏ –ø–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ",
            "–¢–≤–æ—ë —É–º–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç—å", "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è", "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ", "–¢–≤–æ—ë –¥–æ–≤–µ—Ä–∏–µ –∫–æ –º–Ω–µ", "–¢–≤–æ–∏ –∫–∞–ø—Ä–∏–∑—ã", "–ö–∞–∫ —Ç—ã —Å–ø–∏—à—å",
            "–¢–≤–æ—è –º—É–¥—Ä–æ—Å—Ç—å", "–¢–≤–æ–π —É—é—Ç", "–¢–≤–æ–∏ —Ç–µ–ø–ª—ã–µ —Å–ª–æ–≤–∞", "–ö–∞–∫ —Ç—ã —Ä–∞–¥—É–µ—à—å—Å—è –º–µ–ª–æ—á–∞–º", "–¢–≤–æ—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å",
            "–¢—ã —Å–∞–º–æ–µ –¥–æ—Ä–æ–≥–æ–µ —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å", "–¢–≤–æ–π –≥–æ–ª–æ—Å –≤ —Ç—Ä—É–±–∫–µ", "–¢–≤–æ—è –º–∞–Ω–µ—Ä–∞ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å—Å—è", "–¢–≤–æ—è –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å", "–¢–≤–æ—è –ª—é–±–æ–≤—å –∫ –∂–∏–≤–æ—Ç–Ω—ã–º",
            "–¢–≤–æ–∏ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –º–Ω–µ", "–¢–≤–æ—è —Å–∏–ª–∞ –≤–æ–ª–∏", "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è", "–¢–≤–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∏—Ä", "–¢–≤–æ–∏ –º–∏–ª—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏",
            "–ö–∞–∫ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å —Ñ–∏–ª—å–º—ã —Å–æ –º–Ω–æ–π", "–¢–≤–æ—è —Å–∫—Ä–æ–º–Ω–æ—Å—Ç—å", "–¢–≤–æ—ë —É–º–µ–Ω–∏–µ –ø—Ä–æ—â–∞—Ç—å", "–¢–≤–æ—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å", "–¢–≤–æ—è —É–ª—ã–±–∫–∞ –≤–æ –≤—Å–µ –∑—É–±—ã",
            "–¢–≤–æ–∏ –Ω–µ–∂–Ω—ã–µ –≥—É–±—ã", "–¢–≤–æ–π –º—è–≥–∫–∏–π –≥–æ–ª–æ—Å", "–¢–≤–æ—è —Ü–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª–µ–Ω–Ω–æ—Å—Ç—å", "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞", "–¢–≤–æ–∏ —Å–º–µ—à–Ω—ã–µ –≤–∏–¥–µ–æ",
            "–¢–≤–æ—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–∏—Ö –∏–¥–µ–π", "–ö–∞–∫ —Ç—ã –æ–±–Ω–∏–º–∞–µ—à—å –º–µ–Ω—è –≤ –º–æ–∏—Ö –º–µ—á—Ç–∞—Ö", "–¢–≤–æ—è –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "–¢–≤–æ—è –ª–µ–≥–∫–æ—Å—Ç—å", "–¢–≤–æ—è —Å—Ç—Ä–∞—Å—Ç—å",
            "–¢–≤–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç", "–ö–∞–∫ —Ç—ã –ø–æ–µ—à—å", "–¢–≤–æ—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞", "–¢–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–º", "–¢–≤–æ—è –ª–∞—Å–∫–∞", "–¢–≤–æ–π –≤–∑–≥–ª—è–¥ –∫–æ–≥–¥–∞ —Ç—ã —Å–µ—Ä—å–µ–∑–Ω–∞—è",
            "–¢–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ —Ç—ã?", "–¢–≤–æ—ë –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏", "–¢–≤–æ—è –≤–µ—Ä–∞ –≤ –Ω–∞—à–µ –±—É–¥—É—â–µ–µ", "–¢–≤–æ—ë —É–º–µ–Ω–∏–µ —É–¥–∏–≤–ª—è—Ç—å", "–¢–≤–æ—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å",
            "–¢–≤–æ—è –≥–æ—Ä–¥–æ—Å—Ç—å", "–¢–≤–æ—è —á—É—Ç–∫–æ—Å—Ç—å", "–¢–≤–æ–π –∫–æ–º—Ñ–æ—Ä—Ç", "–¢–≤–æ—ë —Ç–µ–ø–ª–æ", "–¢–≤–æ—è –º–∞–≥–∏—è", "–¢–≤–æ—ë —Å–∏—è–Ω–∏–µ", "–¢—ã –ø—Ä–æ—Å—Ç–æ –ª—É—á—à–∞—è –≤–æ –≤—Å–µ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π",
            "–¢–≤–æ—ë —Å–µ—Ä–¥—Ü–µ", "–¢–æ —á—Ç–æ —Ç—ã –≤—ã–±—Ä–∞–ª–∞ –º–µ–Ω—è", "–¢–≤–æ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–≤–µ—Ç", "–¢–æ —á—Ç–æ —Ç—ã –µ—Å—Ç—å", "–¢—ã –º–æ—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è", "–ù–∞—à–µ –Ω–∞–≤—Å–µ–≥–¥–∞"
        ]
    };

    let loveScore = 0;
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function init() {
        const start = new Date(CONFIG.startDate);
        const days = Math.floor((new Date() - start) / (1000 * 60 * 60 * 24));
        document.getElementById('days-count').textContent = days;

        const list = document.getElementById('reasons-list');
        CONFIG.reasons.forEach((reason, i) => {
            const card = document.createElement('div');
            card.className = 'reason-card';
            const num = (i === CONFIG.reasons.length - 1) ? "‚àû" : i + 1;
            card.innerHTML = `<span class="reason-num">#${num}</span> <span>${reason}</span>`;
            list.appendChild(card);
        });

        setInterval(createFloatingText, 3000);
        setInterval(createHeart, 1500);
        setInterval(spawnGameHeart, 1200);
        initPuzzle();

        const observer = new IntersectionObserver(entries => {
            entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('section').forEach(s => observer.observe(s));
    }

    function createFloatingText() {
        const div = document.createElement('div');
        div.className = 'bg-text';
        div.textContent = CONFIG.floatingPhrases[Math.floor(Math.random() * CONFIG.floatingPhrases.length)];
        div.style.left = Math.random() * 70 + 15 + 'vw';
        document.getElementById('bg-text').appendChild(div);
        setTimeout(() => div.remove(), 8000);
    }

    function createHeart() {
        const h = document.createElement('div');
        h.className = 'bg-heart';
        h.textContent = ['‚ù§Ô∏è', 'üíñ', 'üíù', '‚ú®'][Math.floor(Math.random()*4)];
        h.style.left = Math.random() * 100 + 'vw';
        h.style.fontSize = Math.random() * 20 + 15 + 'px';
        h.style.animationDuration = Math.random() * 3 + 5 + 's';
        document.getElementById('bg-hearts').appendChild(h);
        setTimeout(() => h.remove(), 8000);
    }

    function spawnGameHeart() {
        const area = document.getElementById('game-area');
        if (!area) return;
        const h = document.createElement('div');
        h.className = 'catch-heart';
        h.textContent = '‚ù§Ô∏è';
        h.style.left = Math.random() * 85 + '%';
        h.style.top = '200px';
        area.appendChild(h);

        const anim = h.animate([
            { top: '200px', opacity: 1 },
            { top: '-40px', opacity: 0 }
        ], { duration: 2500, easing: 'linear' });

        h.onclick = () => {
            updateLove(2);
            playPop();
            h.textContent = '‚ú®';
            setTimeout(() => h.remove(), 100);
        };
        anim.onfinish = () => h.remove();
    }

    /* Puzzle Game Logic */
    const puzzleTarget = ['‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'üñ§', 'ü§ç', 'üíñ'];
    let puzzleState = [];
    function initPuzzle() {
        const grid = document.getElementById('puzzle-grid');
        grid.innerHTML = '';
        puzzleState = [...puzzleTarget].sort(() => Math.random() - 0.5);
        let nextIndex = 0;

        puzzleState.forEach((emoji, i) => {
            const piece = document.createElement('div');
            piece.className = 'puzzle-piece';
            piece.textContent = emoji;
            piece.onclick = () => {
                if (emoji === puzzleTarget[nextIndex]) {
                    piece.classList.add('correct');
                    piece.style.pointerEvents = 'none';
                    nextIndex++;
                    updateLove(3);
                    playPop();
                    if (nextIndex === puzzleTarget.length) {
                        document.getElementById('puzzle-status').textContent = "–£—Ä–∞! –¢—ã —Å–æ–±—Ä–∞–ª–∞ –º–æ—ë —Å–µ—Ä–¥—Ü–µ! üéâ";
                        setTimeout(initPuzzle, 3000);
                    }
                } else {
                    piece.style.background = '#ff4d6d';
                    setTimeout(() => piece.style.background = '', 300);
                }
            };
            grid.appendChild(piece);
        });
    }

    function updateLove(pts) {
        loveScore = Math.min(loveScore + pts, 100);
        document.getElementById('love-fill').style.width = loveScore + '%';
        let msg = loveScore + "% ‚Äî –ù–∞–ø–æ–ª–Ω—è–π –¥–∞–ª—å—à–µ!";
        if(loveScore > 70) msg = "–ü–æ—á—Ç–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ! üî•";
        if(loveScore >= 100) msg = "‚àû% –õ–Æ–ë–í–ò! –¢–´ –ú–û–Ø –ñ–ò–ó–ù–¨! ‚ôæÔ∏è";
        document.getElementById('love-text').textContent = msg;
    }

    function playPop() {
        try {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        } catch(e) {}
    }

    function toggleTheme() {
        document.body.classList.toggle('theme-night');
        document.getElementById('theme-btn').textContent = document.body.classList.contains('theme-night') ? '‚òÄÔ∏è' : 'üåô';
    }

    function showKiss() {
        const modal = document.getElementById('kiss-modal');
        modal.style.display = 'flex';
        playPop();
        for(let i=0; i<15; i++) setTimeout(createHeart, i * 50);
    }

    document.getElementById('surprise-btn').onclick = function() {
        alert("–ú–∞–ª–∏–∫–∞, —Å 14 —Ñ–µ–≤—Ä–∞–ª—è —Ç–µ–±—è, –±—É–ª–æ—á–∫–∞! –¢—ã —Å–∞–º–æ–µ –≤–∫—É—Å–Ω–æ–µ –∏ –º–∏–ª–æ–µ, —á—Ç–æ –µ—Å—Ç—å –≤ —ç—Ç–æ–º –º–∏—Ä–µ. –õ—é–±–ª—é —Ç–µ–±—è –±–µ–∑—É–º–Ω–æ! ‚ù§Ô∏è");
        updateLove(100);
    };

    window.onload = init;
</script>
</body>
</html>
